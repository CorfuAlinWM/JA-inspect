var PromoModalComponent=function(n){function f(){function r(){var t=n(".promo-popup-component"),i=t.height();n(window).height()<i?n("html").addClass("remove-scroll"):n("html").removeClass("remove-scroll")}n(document).on("modal.notification:opened",function(){var e,f;if(setTimeout(function(){r()},1e3),t.data("id")===i.data("ref")){t.addClass("alert promo generic-modal-component");t.find(".modal-dialog").addClass("p-0");t.find(".modal-dialog").addClass(i.data("css-class"));t.find("[data-ref=cancel]").off().on("click",function(t){t.preventDefault();n(document).trigger("modal.notification:close")});t.find("[data-ref=submit]").off().on("click",function(t){if(t.preventDefault(),n(document).trigger("modal.notification:close"),n(this).data("order-start")){var i=n("[data-component=cart-control] [data-ref=order-start]");i.length&&n(i[0]).click()}});e=i.data("css-class")||"";e.indexOf("close-white-black")>=0&&(f=t.find(".modal-dialog .close-wrapper .close img"),f.length&&(u=f.attr("src"),f.attr("src","/assets/jamba/img/icons/close-white-black.svg")))}n(window).resize(function(){r()})});n(document).on("modal.notification:closed",function(){var r,n;t.data("id")===i.data("ref")&&(t.data("id",""),t.removeClass("alert promo generic-modal-component"),t.find(".modal-dialog").removeClass("p-0"),t.find(".modal-dialog").removeClass(i.data("css-class")),r=i.data("css-class")||"",r.indexOf("close-white-black")>=0&&(n=t.find(".modal-dialog .close-wrapper .close img"),n.length&&n.attr("src",u)))})}function e(){var f=r.data("promo-id"),h,s,e,c,l,u;if(f){if(h=i.html(),f.toLowerCase()==="c6b3b545-d812-4e52-b367-4434305ae8fb"||f.toLowerCase()==="2f473c5b-cb9d-4b0c-b113-0dd59fe99f6d"){if(jamba_ofl.isLoggedIn>0)return;s=n("<div />");s.append(i.html());e=s.find("a[data-down-load-mobile-app]");c=o();c==="iOS"?e.attr("href",e.data("apple-app")):c==="Android"&&e.attr("href",e.data("google-app"));h=s.html()}(l=parseInt(r.data("promo-cookie-lifetime"),10)||30,u=n.cookie(f),u=sessionStorage.getItem(f),u)||(u=n.cookie("c6b3b545-d812-4e52-b367-4434305ae8fb"),u=sessionStorage.getItem("c6b3b545-d812-4e52-b367-4434305ae8fb"),u)||(u=n.cookie("2f473c5b-cb9d-4b0c-b113-0dd59fe99f6d"),u=sessionStorage.getItem("2f473c5b-cb9d-4b0c-b113-0dd59fe99f6d"),u)||(t.data("id",i.data("ref")),n(document).trigger("modal.notification:open",[h]),sessionStorage.setItem(f,"1"),n.cookie(f,1,{expires:l}))}}function o(){var n=navigator.userAgent;return/android/i.test(n)?"Android":/iPad|iPhone|iPod/.test(n)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1?"iOS":"Other"}function s(){r.length&&(n("body").find(".modal-component.open").length||(f(),e()))}var r=n("body").find("[data-component=promo-modal-component]"),i=r.find("[data-ref=promo-modal-component-container]"),t=n("body").find("[data-component=modal-notification]"),u;return{init:s}}(jQuery);$(window).on("load",function(){PromoModalComponent.init()})