var BoostComponent=function(n,t,i){function s(){r.find("[data-ref=toggle]").on("click",function(t){var i,r;u||(t=t||window.event,i=t.target||t.srcElement,i&&n(i).data("stop-propagation"))||(u=!0,r=n(this),e(r,null,t).always(function(){u=!1}))});n(document).on("click","[data-ref=start-order-dialog]",function(){n(this).attr("opened","true")});r.find("[data-ref=start-order-dialog]").on("click keypress",function(t){var r,i,u;(t=t||window.event,r=t.target||t.srcElement,r&&n(r).data("stop-propagation"))||(i=n(this).attr("data-container-id"),(i&&t.which==13||i&&t.type=="click")&&(u=n("[data-container="+i+"]").html(),o.data("id",i),n(document).trigger("modal.notification:open",u)))});n(document).on("boost.toggle",function(n,t){u=!0;e(t,null,n).always(function(){u=!1})});n(document).on("modal.notification:opened",function(){if(o.data("id")==="menu-item-start-order-info-modal-container")o.find("[data-ref=edit-ofl]").on("click",function(){n(document).trigger("modal.notification:close")})})}function f(t,u){var f,e;(r.find(".item[data-addon-id="+t+"]").toggleClass("selected"),r.find(".item[data-addon-id="+t+"]").hasClass("selected")?n(u).find(".boost-details-wrapper").attr("aria-checked",!0):n(u).find(".boost-details-wrapper").attr("aria-checked",!1),f=r.find("[data-ref=selected-items-count]"),f.length)&&(e=i.getCart(),e)&&f.each(function(){var t=n(this).data("addon-category-id");n(this).html(i.getAddonGroupItemsCount(t))})}function e(r,u,e){var o=new n.Deferred,s=r.data("addon-id"),a=r.data("addon-category-id"),h=i.getAddonGroupItemsCount(a),c,l;return r.closest(".item").hasClass("selected")?(c=r.data("min-selects"),(!c||c&&h>c)&&(i.removeBoost(s),f(s,r)),o.resolve()):(n(document).trigger("ga.tracking:addon.moreinfo",e),l=r.data("max-selects"),l&&h>=l&&r.closest(".item").siblings(".item.selected").each(function(){if(!(h-l<0)){h--;var t=n(this).data("addon-id");i.removeBoost(t,r);f(t,n(this))}}),u?(i.addBoost(u),f(s),o.resolve()):t.load(s,r).done(function(n){if(!n){o.reject();return}i.addBoost(n);f(s,r);o.resolve()}).fail(function(){o.reject()})),o.promise()}function h(){var u,l,f,o,c,a,h,t;if(r.length)if(s(),u=i.getPreselectedAddons(),u&&u.length){for(l=r.find("[data-ref=toggle]"),t=0;t<u.length;t++)if(f=u[t].addons,f&&f.length)for(o=0;o<f.length;o++)(c=l.find('[data-addon-id="'+f[o].id+'"]'),c.length)&&(a={id:u[t].id,chainId:u[t].chainId,title:u[t].title,addon:f[o]},e(n(c.get(0)),a));n(document).trigger("product.updated")}else if(h=r.find("[data-ref=toggle][data-addon-category-mandatory=true][data-addon-default=true]"),h.length){for(t=0;t<h.length;t++)e(n(h.get(t)));n(document).trigger("product.updated")}}var r=n("body").find("[data-component=boost]"),o=n("body").find("[data-component=modal-notification]"),u=!1;return{init:h}}(jQuery,BoostManager,TemporaryProductStorage);$(window).on("load",function(){BoostComponent.init()})