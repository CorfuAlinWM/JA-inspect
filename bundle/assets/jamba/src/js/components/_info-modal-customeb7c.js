var InfoModalComponent=function(n,t,i,r){function s(){function r(r,e){var s=new n.Deferred;o=null;var c=e.data("addon-id"),l=e.data("addon-category-id"),h=e.data("addon-not-available");return t.load(c,e).done(function(n){var a,r,t;if(!n||!n.addon){u.find("[data-ref=body]").html("");s.reject();return}if(!f){u.find("[data-ref=body]").html("");s.reject();return}a=f(n.addon);u.find("[data-ref=body]").html(a);r=u.find(".description-wrapper > p");r.length&&(r.attr("id","addonDescription"),u.attr("aria-describedby","addonDescription"));o=n;t=u.find("[data-ref=btn-submit]");i.boostAlreadyAdded(c)?(t.html(t.data("label-remove")),e.data("min-selects")&&i.getAddonGroupItemsCount(l)<=e.data("min-selects")&&(h=!0)):(t.html(t.data("label-add")),i.getAddonGroupItemsCount(l)>=e.data("max-selects")&&(h=!0));u.find("[data-ref=btn-submit]").removeClass("d-none");h&&u.find("[data-ref=btn-submit]").addClass("d-none");s.resolve()}).fail(function(){s.reject()}),s.promise()}n(document).on("modal.closed",function(){setTimeout(function(){var n=u.find("[data-close]");n.length&&(n.removeAttr("data-product-name"),n.removeAttr("data-boost-choosen"))},500)});u.on("modal.loaded",function(t,i,f){var s,h;f&&f.currentTarget&&(s=n(f.currentTarget),s.data("container-id")===e.data("container"))&&(n(document).trigger("ga.tracking:addon.moreinfo",f),h=s.closest("[data-ref=toggle]"),r(u,s).done(function(){var i,t;if(u.trigger("lazy-loading",f),i=u.find("[data-close]"),i.length&&(i.attr("data-product-name",s.data("product-name")),i.attr("data-boost-choosen",s.data("addon"))),t=u.find("[data-ref=btn-submit]"),t.length){console.log(s.data("product-name"));t.attr("data-product-name",s.data("product-name"));t.attr("data-boost-choosen",s.data("addon"));t.on("click",function(){u.trigger("close.modal");n(document).trigger("boost.toggle",[h,o.addon.id])})}}).fail(function(){u.trigger("lazy-loading",f)}))})}function h(){if(e.length){var n=e.find("[data-ref=template]").html();f=r.compile(n);s()}}var f=null,e=n("body").find("[data-component=info-modal-component]"),u=n("body").find(".modal-component"),o=null;return{init:h,open:open,close:close}}(jQuery,BoostManager,TemporaryProductStorage,Handlebars);$(window).on("load",function(){InfoModalComponent.init()})