var IngredientsBoxUpdater=function(n,t,i){function e(){n(document).on("shown.modal.ingredient",function(t,i){var s,e,o,a,h,l;if(r){for(s={},f.length&&n.extend(!0,s,JSON.parse(f.html())),e=s.items,o=0;o<e.length;o++)(a=e[o].title,h=i.items.find(function(n){return n.title.toUpperCase()===a.toUpperCase()}),h)&&n.extend(!0,e[o],h);var y=u.find("[data-ref=content]"),p=e.filter(function(n){return!n.isTopping}),c=r({ingredients:p}),v=e.filter(function(n){return n.isTopping});v.length>0&&(c+=r({toppings:v}));l=e.filter(function(n){return!!n.substitute}).map(function(n){return n.substitute});l.length>0&&(c+=r({ingredients:l,isSubstituteList:!0}));y.html(c)}})}function o(){var o,s,f;u.length&&(o=u.find("[data-ref=template]"),o.length>0&&(s=o.html(),r=t.compile(s)),e(),f=i.getIngredients(),f&&f.length&&n(document).trigger("shown.modal.ingredient",{items:f}))}var r=null,u=n(document).find("[data-component=ingredients-box-updater]"),f=u.find("[data-ref=settings]");return{init:o}}(jQuery,Handlebars,TemporaryProductStorage);$(window).on("load",function(){IngredientsBoxUpdater.init()})